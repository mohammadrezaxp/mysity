{% extends 'base.html' %}
{% load static %}
{% block content %}

    <!-- start banner Area -->
    <section class="relative about-banner">
        <div class="overlay overlay-bg"></div>
        <div class="container">
            <div class="row d-flex align-items-center justify-content-center">
                <div class="about-content col-lg-12">
                    <h1 class="text-white">Contact Us</h1>
                    <p class="text-white link-nav">
                        <a href="{% url 'index' %}">Home</a>
                        <span class="lnr lnr-arrow-right"></span>
                        <a href="{% url 'contact' %}">Contact Us</a>
                    </p>
                </div>
            </div>
        </div>
    </section>
    <!-- End banner Area -->

    <!-- Start contact-page Area -->
    <section class="contact-page-area section-gap">
        <div class="container">
            <div class="row">
                <!-- Google Map -->
                <div class="col-lg-12 mb-4">
                    <div id="map" style="width:100%; height:445px;"></div>
                </div>

                <!-- Contact Info -->
                <div class="col-lg-4 d-flex flex-column address-wrap mb-4">
                    <div class="single-contact-address d-flex flex-row mb-3">
                        <div class="icon"><span class="lnr lnr-home"></span></div>
                        <div class="contact-details">
                            <h5>Binghamton, New York</h5>
                            <p>4343 Hinkle Deegan Lake Road</p>
                        </div>
                    </div>
                    <div class="single-contact-address d-flex flex-row mb-3">
                        <div class="icon"><span class="lnr lnr-phone-handset"></span></div>
                        <div class="contact-details">
                            <h5>00 (958) 9865 562</h5>
                            <p>Mon to Fri 9am to 6 pm</p>
                        </div>
                    </div>
                    <div class="single-contact-address d-flex flex-row mb-3">
                        <div class="icon"><span class="lnr lnr-envelope"></span></div>
                        <div class="contact-details">
                            <h5>support@colorlib.com</h5>
                            <p>Send us your query anytime!</p>
                        </div>
                    </div>
                </div>

                <!-- Contact Form -->
                <div class="col-lg-8">
                    <form class="form-area contact-form text-right" id="myForm" action="{% url 'contact' %}" method="post">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-lg-6 form-group">
                                {{ form.name }}
                                {{ form.email }}
                                {{ form.subject }}
                            </div>
                            <div class="col-lg-6 form-group">
                                {{ form.message }}
                            </div>
                            <div class="col-lg-12">
                                <div class="form-group mb-3">
                                    {{ form.captcha }}
                                    {% if form.captcha.errors %}
                                        <div class="text-danger mt-2">
                                            {% for error in form.captcha.errors %}
                                                {{ error }}
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                </div>
                                <div class="alert-msg" style="text-align: left;"></div>
                                <button type="submit" class="genric-btn primary" style="float: right;">Send Message</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <!-- End contact-page Area -->

    <!-- Google Maps Script -->
    <script>
        function initMap() {
            // مختصات لوکیشن (Binghamton)
            const location = { lat: 42.0987, lng: -75.9186 };
            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 14,
                center: location,
            });
            const marker = new google.maps.Marker({
                position: location,
                map: map,
                title: "Our Location"
            });
        }
    </script>

    <!-- Google Maps API -->
    <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD-TEST-KEY-EXAMPLE&callback=initMap"
            async
            defer
    ></script>

    <!-- SweetAlert2 برای پاپ‌آپ زیبا -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- نمایش پاپ‌آپ برای پیام‌ها -->
    {% if messages %}
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                {% for message in messages %}
                    // تنظیم آیکون بر اساس نوع پیام
                    let icon = 'info';
                    let title = 'Message';

                    {% if message.tags == 'success' %}
                        icon = 'success';
                        title = 'Success!';
                    {% elif message.tags == 'error' %}
                        icon = 'error';
                        title = 'Error!';
                    {% elif message.tags == 'warning' %}
                        icon = 'warning';
                        title = 'Warning!';
                    {% endif %}

                    Swal.fire({
                        icon: icon,
                        title: title,
                        text: '{{ message|escapejs }}',
                        confirmButtonText: 'OK',
                        confirmButtonColor: '#3085d6',
                        timer: 5000,
                        timerProgressBar: true,
                        showClass: {
                            popup: 'animate__animated animate__fadeInDown'
                        },
                        hideClass: {
                            popup: 'animate__animated animate__fadeOutUp'
                        }
                    });
                {% endfor %}
            });
        </script>

        <!-- اضافه کردن انیمیشن‌های Animate.css -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    {% endif %}

{% endblock %}